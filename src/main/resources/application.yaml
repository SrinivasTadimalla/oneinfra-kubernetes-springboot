spring:
  application:
    name: kubernetes

  # ----------------------------------------
  # Web / CORS (Angular MFE support)
  # ----------------------------------------
  web:
    cors:
      enabled: true
      configurations:
        default:
          allowed-origins:
            - "http://localhost:4200"
            - "http://192.168.66.108:4200"
            - "http://192.168.66.115:4200"
          allowed-methods:
            - GET
            - POST
            - PUT
            - PATCH
            - DELETE
            - OPTIONS
          allowed-headers:
            - "*"
          allow-credentials: true

  # ----------------------------------------
  # Postgres DataSource (ENABLED)
  # Uses iaas_kubernetes schema
  # ----------------------------------------
  datasource:
    url: jdbc:postgresql://${DB_HOST:192.168.66.1}:5432/${DB_NAME:postgres}?currentSchema=${DB_SCHEMA:iaas_kubernetes}
    username: ${DB_USER:postgres}
    password: ${DB_PASSWORD:db2@dmin}
    driver-class-name: org.postgresql.Driver

  # ----------------------------------------
  # JPA / Hibernate
  # ----------------------------------------
  jpa:
    open-in-view: false
    hibernate:
      ddl-auto: none   # keep SAFE; use Flyway or manual SQL
    properties:
      hibernate:
        format_sql: true

  # ----------------------------------------
  # Disable SQL init scripts (we control schema via SQL/Flyway)
  # ----------------------------------------
  sql:
    init:
      mode: never

# ----------------------------------------
# Server
# ----------------------------------------
server:
  port: 9009

# ----------------------------------------
# Custom OneInfra properties
# ----------------------------------------
exec:
  timeout-seconds: 120

# ----------------------------------------
# Logging
# ----------------------------------------
logging:
  level:
    root: INFO
    org.springframework.web: INFO
    org.hibernate.SQL: DEBUG
